import json

with open('categorized_personas.json', 'r', encoding='utf-8') as f:
    parsed = json.load(f) 

ad = """iPhone 17 ‚Äî —Ç–≤–æ–π —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π!
–û—â—É—Ç–∏ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å, —É–ª—É—á—à–µ–Ω–Ω—É—é –∫–∞–º–µ—Ä—É –∏ –¥–æ–ª–≥–∏–π —Å—Ä–æ–∫ —Ä–∞–±–æ—Ç—ã –±–∞—Ç–∞—Ä–µ–∏.
–°–Ω–∏–º–∞–π –∫—Ä–∏—Å—Ç–∞–ª—å–Ω–æ —á–∏—Å—Ç—ã–µ —Ñ–æ—Ç–æ, –∏–≥—Ä–∞–π –≤ –ª—é–±—ã–µ –∏–≥—Ä—ã –±–µ–∑ –ª–∞–≥–æ–≤ –∏ –æ—Å—Ç–∞–≤–∞–π—Å—è –Ω–∞ —Å–≤—è–∑–∏ –≤–µ—Å—å –¥–µ–Ω—å.

üí• –°–∫–∏–¥–∫–∞ 10% —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è!
üì± –í—ã–±–∏—Ä–∞–π —Å–≤–æ–π iPhone 17 –∏ —à–∞–≥–∞–π –≤ –±—É–¥—É—â–µ–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π —É–∂–µ —Å–µ–π—á–∞—Å."""

promt = """ PROMPT START
–¢—ã ‚Äî —Å–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ä–µ–∫–ª–∞–º–µ. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é  –ø–µ—Ä—Å–æ–Ω –∏ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –æ–±—â—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –≥—Ä—É–ø–ø—ã. –û—Ü–µ–Ω–∏–≤–∞–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–ª–∏–∫–∞ –∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–∫—É–ø–∫–∏ —Å—Ä–µ–¥–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ –≥—Ä—É–ø–ø–µ.

–ü—Ä–∞–≤–∏–ª–∞ –æ—Ü–µ–Ω–∫–∏:

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä—Å–æ–Ω—ã: –≤–æ–∑—Ä–∞—Å—Ç–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω, –ø–æ–ª, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å, –∏–Ω—Ç–µ—Ä–µ—Å—ã, –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã, —Ü–µ–Ω–æ–≤—É—é —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π –∫–∞–Ω–∞–ª.

–£—á–∏—Ç—ã–≤–∞–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ–∫–ª–∞–º—ã –∏–Ω—Ç–µ—Ä–µ—Å–∞–º, —Å—Ç–∏–ª—å –ø–æ–¥–∞—á–∏, –≤—ã–≥–æ–¥—É, —Ü–µ–Ω—É, –Ω–∞–ª–∏—á–∏–µ —Å–∫–∏–¥–∫–∏, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–æ–Ω.

–¶–µ–Ω–æ–≤–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –±–ª–∏–∂–µ –∫ 1 ‚Üí —Å–∏–ª—å–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Ü–µ–Ω—É, —Å–∫–∏–¥–∫–∏; –±–ª–∏–∂–µ –∫ 0 ‚Üí –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –∫–∞—á–µ—Å—Ç–≤–æ, —Ü–µ–Ω–Ω–∏–∫ –º–µ–Ω–µ–µ –≤–∞–∂–µ–Ω.

–ò—Ç–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–¥–∞–≤–∞–π —Å—Ä–µ–¥–Ω–∏–µ –ø–æ –≥—Ä—É–ø–ø–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 1.

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ —Å—Ç—Ä–æ–≥–æ —Ç–∞–∫–æ–π (–¥–≤–µ —Å—Ç—Ä–æ–∫–∏, –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π –∏ –ª–∏—à–Ω–µ–≥–æ —Ç–µ–∫—Å—Ç–∞):
click_probability: <—á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 1>
purchase_probability: <—á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 1>

–í–æ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–µ–∫–ª–∞–º–∞:
–ü–ï–†–°–û–ù–´: {}
–†–ï–ö–õ–ê–ú–ê: {}
PROMPT END
"""


def generate_prompt(ad, target_audiences):
    for target_audience in target_audiences:
        people = parsed[target_audience]
        people_json = json.dumps(people, ensure_ascii=False, indent=2)

    final = promt.format(people_json, ad)
    
    return final

    
if __name__ == "__main__":
    generate_prompt(ad,['low_income_pragmatic_youth'])